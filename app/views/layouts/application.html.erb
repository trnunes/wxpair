<!DOCTYPE html>
<html>
<head>
  <title>Xpair</title>
	<%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
    <%= stylesheet_link_tag    'wxpair', media: 'all', 'data-turbolinks-track' => true %>
	<%= stylesheet_link_tag    'explorator', media: 'all', 'data-turbolinks-track' => true %>
	<%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>

	<script src="/javascripts/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>

	<link rel="stylesheet" type="text/css" href="/javascripts/bootstrap-3.3.7-dist/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.19.1/vis.min.css">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />
	
	<script type="text/javascript" src="/javascripts/jshashtable-master/hashtable.js"></script>
    <script type="text/javascript" src="/javascripts/uuid.js"></script>
    <script type="text/javascript" src="/javascripts/explorator_ui.js"></script>
	<script type="text/javascript" src="/javascripts/operations_controller.js"></script>
    <script type="text/javascript" src="/javascripts/explorator_ajax.js"></script>
    <script type="text/javascript" src="/javascripts/explorator_helper.js"></script>
    <script type="text/javascript" src="/javascripts/explorator_controller.js"></script>
	<script type="text/javascript" src="/javascripts/projections/jstree.js"></script>
	<script type="text/javascript" src="/javascripts/projections/adapters.js"></script>
	<script type="text/javascript" src="/javascripts/projections/facetTree.js"></script>
	<script type="text/javascript" src="/javascripts/projections/relationPathTree.js"></script>
	
	<script type="text/javascript" src="/javascripts/controllers/viewControllers.js"></script>
	
	<script src="/javascripts/jquery-contextmenu-common-master/dist/fixed/jquery.contextMenu.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.19.1/vis.min.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>
    <script type="text/javascript" src="/javascripts/explorator_querybuilder.js"></script>
	<script type="text/javascript" src="/javascripts/exploration_graph.js"></script>
	

  <%= csrf_meta_tags %>
  <style type="text/css">
 
    #config {
      float:left;
      width: 400px;
      height: 600px;
    }
  </style>
</head>
<body>
<div>
<%= render :partial => '/layouts/loading' %>
<%= render :partial => 'layouts/search_bar' %>
<%= render :partial => 'layouts/landmarks'%>




<div id="exploration_area" style="position: fixed;top: 75px;overflow: auto;width: 100%;height:85%">	
<%= render :partial => 'session/graph_div'%>


</div>
<%= render :partial => 'session/set_template'%>

<div id="node-popUp">
  <span id="node-operation">node</span> <br>
  <table style="margin:auto;">
    <tr>
      <td>id</td><td><input id="node-id" value="new value" /></td>
    </tr>
    <tr>
      <td>label</td><td><input id="node-label" value="new value" /></td>
    </tr>
  </table>
  <input type="button" value="save" id="node-saveButton" />
  <input type="button" value="cancel" id="node-cancelButton" />
</div>
<div class="modal fade" id="mapModal"  role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" style="overflow: auto; width: 900px">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                 <h4 class="modal-title">Mapping Functions</h4>
				 <div class="form-group" >
					 <div class="radio">
					   <label><input type="radio" class = "param" param = "map_function" param_value = "count" name="radio_strategy" checked>Count items</label>
					 </div>
					 <div class="radio">
					   <label><input type="radio" class = "param" param = "map_function" param_value = "sum" name="radio_strategy" checked>Sum</label>
					 </div>
					 <div class="radio">
					   <label><input type="radio" class = "param" param = "map_function" param_value = "avg" name="radio_strategy">Average</label>
					 </div>
					 
					 <div class="radio">
					   <label><input type="radio" class = "param" param = "map_function" param_value = "user_defined" name="radio_strategy">Define Custom Function</label>
					 </div>
					 
					 
					 <!-- <div class="radio">
					   <label><input type="radio" class = "param" param = "grouping_function" param_value = "clustering" name="radio_strategy">Clustering</label>
					 </div> -->
				 </div>

				<div>
		            <div class="modal-body">
					</div>
				</div>
					
				<form class="form-horizontal" id = "function_form">
   				 <div class="form-group" id="relation_input" >
   				   <label for="relation" class="control-label col-sm-2">Name</label>
   				   <div class="col-sm-10">
   					   <input type="text" class="form-control" id="input_name">
   				   </div>
   				 </div>
					
				 <div class="form-group" id="function_init" >
				   <label for="relation" class="control-label col-sm-2">Initializer</label>
				   <div class="col-sm-10">
					   <textarea class="form-control" rows="5" id="init"></textarea>
				   </div>
				 </div>
  				  <div class="form-group">
					  
  				    <label class="control-label col-sm-2" >Map Function</label>
  				    <div class="col-sm-10">
  						<textarea class="form-control" rows="5" id="comment"></textarea>
  				    </div>
  				  </div>
					
				  <div class="form-group">
				    <label class="control-label col-sm-2" for="email">Type</label>
				    <div class="col-sm-10">
					   <select class="form-control" id="select_comparator">
						   <option value="=">Aggregator</option>
					       <option value="<=">Transformator</option>
					       <option value="<">Combinator</option>
					   </select>
				    </div>
				  </div>
				</div>
			</form>
 		   <div class="modal-footer">
 		       <button type="button" id="exec" class="exec btn btn-default" data-dismiss="modal">Go</button>
			   <button type="button" id="clear" class="clear btn btn-default" data-dismiss="modal">Clear</button>
 	       </div>
			
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="groupModal"  role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" style="overflow: auto; width: 900px">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                 <h4 class="modal-title">Grouping Strategy</h4>
				 <div class="form-group" >
					 <div class="radio">
					   <label><input type="radio" class = "relation_tree_activator param" param = "grouping_function" param_value = "by_relation" name="radio_strategy" checked>By Schema Relation</label>
					 </div>
					 <div class="radio">
					   <label><input type="radio" class = "param related_set_activator" param = "grouping_function" param_value = "by_relation" name="radio_strategy">By Related Set</label>
					 </div>
					 
					 <div class="radio">
					   <label><input type="radio" class = "param by_domain_act" param = "grouping_function" param_value = "by_domain" name="radio_strategy">By Domain</label>
					 </div>
					 
					 <div class="radio">
					   <label><input type="radio" class = "param" param = "grouping_function" param_value = "user_defined" name="radio_strategy">Define Custom Operator</label>
					 </div>
					 
					 <!-- <div class="radio">
					   <label><input type="radio" class = "param" param = "grouping_function" param_value = "clustering" name="radio_strategy">Clustering</label>
					 </div> -->
				 </div>
				 <!-- <div class="form-group" >

					 <div class="checkbox">
					   <label><input type="checkbox" id = "restrict_groups_check">Restrict Groups by Set</label>
					 </div>
				 </div> -->
				 
            </div>
				<div>
					
		            <div class="modal-body">
					</div>
				</div>
					
				<form class="form-horizontal">
				<div class="related_sets_div">
  					<div class="form-group">
  					  <label class="control-label col-sm-2" for="pwd">Choose Related Set</label>
  					  <div class="col-sm-10">
  						 <select class="form-control related_sets_select">
  						   <option value="sm"><a>None</a></option>
  						 </select>
  					  </div>
  					</div>
				</div>
					
  				  <div class="form-group" id ="image_select_div">
  				    <label class="control-label col-sm-2" for="pwd">Select Restriction Set</label>
  				    <div class="col-sm-10"> 
  					   <select class="form-control" id = "image_select">
  					     <option value="sm"><a>Select a Set</a></option>
  					   </select>
  				    </div>
  				  </div>
					
					  <div class="form-group">
					    <label class="control-label col-sm-2" for="pwd">Groups Preview</label>
					    <div class="col-sm-10"> 
						   <select class="form-control values_select">
						     <option value="sm"><a>Grouping Values</a></option>
						   </select>
					    </div>
					  </div>
				</form>
	 		   <div class="modal-footer">
	 		       <button type="button" id="exec" class="exec btn btn-default" data-dismiss="modal">Go</button>
				   <button type="button" id="clear" class="clear btn btn-default" data-dismiss="modal">Clear</button>
	 	       </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<!-- Modal -->
<div class="modal fade" id="pathModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" style="overflow: auto; width: 900px">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                 <h4 class="modal-title">Relations Selection</h4>
				 <div class="form-group" id="position">
					 <label>Position</label>
					 <div class="radio">
					   <label><input type="radio" id="domain" class = "param" param = "position" param_value = "domain" name="radio_pos">Grouping Items</label>
					 </div>
					 <div class="radio">
					   <label><input type="radio" id="image" class = "param" param = "position" param_value = "image" name="radio_pos" checked>Grouped Items</label>
					 </div>					 
				 </div>
				<div>
		            <div class="modal-body">
					</div>
				</div>
			</div>
					
				<form class="form-horizontal">
					  <div class="form-group">
					    <label class="control-label col-sm-2" for="pwd">Values Preview</label>
					    <div class="col-sm-10"> 
						   <select class="form-control values_select">
						     <option value="sm"><a>Values</a></option>
						   </select>
					    </div>
					  </div>
				</form>
 	 		   <div class="modal-footer">
 	 		       <button type="button" id="exec" class="exec btn btn-default" data-dismiss="modal">Go</button>
 				   <button type="button" id="clear" class="clear btn btn-default" data-dismiss="modal">Clear</button>
 	 	       </div>
				
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="facetModal"  role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" style="overflow: auto; width: 900px">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                 <h4 class="modal-title">Filters</h4>
				 <div class="form-group" id="position">
					 <label>Position</label>
					 <div class="radio">
					   <label><input type="radio" id="domain" class = "param" param = "position" param_value = "domain" name="radio_pos">Grouping Items</label>
					 </div>
					 <div class="radio">
					   <label><input type="radio" id="image" class = "param" param = "position" param_value = "image" name="radio_pos" checked>Grouped Items</label>
					 </div>					 
				 </div>
				 <div class="form-group" >

					 <div class="checkbox">
					   <label><input type="checkbox" class="relation_tree_activator param" id="relation_radio"  value = "relation_compare" name="radio_strategy">Choose Relations</label>
					 </div>
				 </div>
            </div>
				<div>
		            <div class="modal-body">
					</div>
				</div>
      			 <div class="filters" style="padding: 8px;">
      			 </div>
					
				<form class="form-horizontal">
				 <!-- <div class="form-group" id="relation_input" >
				   <label for="relation" class="control-label col-sm-2">Relation</label>
				   <div class="col-sm-10">
					   <input type="text" class="form-control" id="input_relation">
				   </div>
				 </div> -->
					
				  <div class="form-group">
				    <label class="control-label col-sm-2" for="email">Operator:</label>
				    <div class="col-sm-10">
					   <select class="form-control" id="select_comparator">
						   <option value="=">=</option>
					       <option value="<=">&le;</option>
					       <option value="<"><</option>
					       <option value=">">></option>
						   <option value=">=">&ge;</option>
						   <option value="in">Contained In</option>
					   </select>
				    </div>
				  </div>
				  <div class="form-group">
				    <label class="control-label col-sm-2" for="pwd">Select Values:</label>
				    <div class="col-sm-10"> 
					   <select class="form-control values_select">
					     <option value="sm"><a>Select a Value</a></option>
					   </select>
				    </div>
				  </div>
				  <div id="facet_conn">
					<div class="form-group">
						<label for="relation" class="control-label col-sm-2">AND</label>
						<div class="col-sm-10">
							<input type="radio" class="param" param="connector" param_value="AND" name="conn" checked>
						</div>
					</div>
					<div class="form-group">
						<label for="relation" class="control-label col-sm-2">OR</label>
						<div class="col-sm-10">
							<input type="radio" class="param" param="connector" param_value="OR" name="conn">
						</div>
					</div>
				</div>
				  
				  <div class="form-group"> 
				    <div class="col-sm-offset-2 col-sm-10">
				      <button type="button" id="button_add_filter" class="btn btn-default">Add Filter</button>
				    </div>
				  </div>
				</form>
 	 		   <div class="modal-footer">
 	 		       <button type="button" id="exec" class="exec btn btn-default" data-dismiss="modal">Go</button>
 				   <button type="button" id="clear" class="clear btn btn-default" data-dismiss="modal">Clear</button>
 	 	       </div>
				
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="rankModal"  role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" style="overflow: auto; width: 900px">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                 <h4 class="modal-title">Ranking Strategy</h4>
				 <div class="form-group" id="position">
					 <label>Position</label>
					 <div class="radio">
					   <label><input type="radio" id="domain" class = "param" param = "position" param_value = "domain" name="radio_pos">Grouping Items</label>
					 </div>
					 <div class="radio">
					   <label><input type="radio" id="image" class = "param" param = "position" param_value = "image" name="radio_pos" checked>Grouped Items</label>
					 </div>					 
				 </div>
				 <div class="form-group" >
					 <label>Strategy</label>
					 <div class="radio">
					   <label><input type="radio" id = "alpha_rank" class = "param" param = "ranking_function" param_value = "alpha_rank" name="radio_strategy" checked>Sort</label>
					 </div>
					 <div class="radio" id = "by_image_div">
					   <label><input type="radio" id = "by_image" class = "param" param = "ranking_function" param_value = "by_image" name="radio_strategy" checked>By Image</label>
					 </div>
					 <div class="radio">
					   <label><input type="radio" class="relation_tree_activator param" id="relation_radio" param = "ranking_function" param_value = "by_relation" name="radio_strategy">By Relation</label>
					 </div>
				 </div>
				 <div class="form-group" id="rank_order">
					 <div class="radio">
					   <label><input type="radio" id="asc" class="param" param="order" param_value="ASC" name="order" checked>ASC</label>
					 </div>
					 <div class="radio">
					   <label><input type="radio" id="desc" class="param" param="order" param_value="DESC" name="order">DESC</label>
					 </div>
				 </div>
            </div>
				<div>
		            <div class="modal-body">
					</div>
				</div>
					
				<form class="form-horizontal">
					  <div class="form-group">
					    <label class="control-label col-sm-2" for="pwd">Values Preview</label>
					    <div class="col-sm-10"> 
						   <select class="form-control values_select">
						     <option value="sm"><a>Ranking Values</a></option>
						   </select>
					    </div>
					  </div>
				</form>
 	 		   <div class="modal-footer">
 	 		       <button type="button" id="exec" class="exec btn btn-default" data-dismiss="modal">Go</button>
 				   <button type="button" id="clear" class="clear btn btn-default" data-dismiss="modal">Clear</button>
 	 	       </div>
				
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>


    <div class="navbar navbar-inverse navbar-fixed-bottom" >
        <div class="container">
        </div>
    </div>
</div>
</body>

<script>
// $("#rankModal").modal("show");
var data = [{ id: 0, text: 'enhancement' }, { id: 1, text: 'bug' }, { id: 2, text: 'duplicate' }, { id: 3, text: 'invalid' }, { id: 4, text: 'wontfix' }];
$('.values-select').select2({data: data});
$(document).ready(function(){
	$("._WINDOW").hide();
	init_all();


	$("#loadwindow").hide();
	
})

</script>
</html>
